<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jess Empadas #Carrinho</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/carrinho.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='fontawesome/css/all.min.css') }}">
</head>

<body>
  <button class="homeButton" onclick="redirectToHome()"><i class="fa-solid fa-arrow-left"></i></button>

  <div class="cart-container">
    <h2>ðŸ›’ Seu Carrinho</h2>

    {% if carrinho %}
      <ul class="cart-list">
        {% for item in carrinho %}
          <li class="cart-item">
            <div class="product-details">
              <div class="img-produto">
                <img src="{{ item.imagem }}" alt="{{ item.nome }}">
              </div>
              <div class="info">
                <h3>{{ item.nome }}</h3>
                <p>PreÃ§o: R$ {{ '%.2f'|format(item.valor) }}</p>
                <p>
                  Quantidade: 
                  <form action="/carrinho/atualizar/{{ item.codproduto }}" method="POST" style="display:inline;">
                    <button type="submit" name="action" value="decrement">âˆ’</button>
                    {{ item.quantidade }}
                    <button type="submit" name="action" value="increment">+</button>
                  </form>
                </p>
                <p><strong>Total: R$ {{ '%.2f'|format(item.total) }}</strong></p>
                <form action="/carrinho/remover/{{ item.codproduto }}" method="POST" style="margin-top:5px;">
                  <button type="submit" class="remove-btn">ðŸ—‘ Excluir</button>
                </form>
              </div>
            </div>
          </li>
        {% endfor %}
      </ul>

      <div class="cart-summary">
        <hr>
        <p class="p-total">Subtotal: <strong>R$ {{ '%.2f'|format(subtotal) }}</strong></p>
        <button class="choose-payment-btn">Finalizar Compra</button>
      </div>
    {% else %}
      <p>Seu carrinho estÃ¡ vazio ðŸ˜¢</p>
    {% endif %}
  </div>

  <script>
    function redirectToHome() {
      window.location.href = "/";
    }
  </script>
</body>
</html>
